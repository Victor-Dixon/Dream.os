<<<<<<< HEAD
<!-- SSOT Domain: documentation -->

=======
>>>>>>> origin/codex/build-cross-platform-control-plane-for-swarm-console
# Cycle Accomplishments Report Protocol

**Protocol ID:** CYCLE_ACCOMPLISHMENTS_REPORT_GENERATION  
**Protocol Version:** 2.0  
**Protocol Status:** ACTIVE  
**Last Updated:** 2025-12-30  
**Implementation:** Modular (`tools/cycle_accomplishments/`)

---

## Overview

The Cycle Accomplishments Report Protocol defines the standard process for generating comprehensive cycle summaries that aggregate accomplishments, completed tasks, and achievements from all active agents.

---

## Protocol Purpose

Generate a consolidated report showing:
- All agent accomplishments during a cycle
- Completed tasks across the swarm
- Achievements and milestones
- Current active work status

---

## Protocol Execution

### Manual Execution (Recommended)

**Primary Implementation (v2.0):**
```bash
# Full features (report + blog + Discord)
python -m tools.cycle_accomplishments.main

# Convenience wrapper
python tools/generate_cycle_accomplishments.py
```

**Options:**
```bash
--no-blog          # Skip blog post generation
--no-discord       # Skip Discord posting
--no-details       # Skip per-agent details in Discord
--no-file          # Skip file upload to Discord
--workspace-root   # Specify workspace root path
--agent-id         # Target Discord channel (default: Agent-4)
```

**Legacy Implementations (Deprecated):**
- `tools/generate_cycle_accomplishments_report.py` (v1.0) - ⚠️ Deprecated
- `tools/unified_cycle_accomplishments_report.py` (v2.0) - ⚠️ Deprecated

### Automatic Execution

The protocol is automatically triggered by:
- `soft_onboard_multiple_agents()` function when `generate_cycle_report=True`
- Location: `src/services/onboarding/soft/service.py` (line 172)

### Protocol Trigger Conditions

1. **Manual execution** - Run script directly when needed
2. **Post-onboarding** - After soft onboarding multiple agents
3. **Cycle completion** - After significant swarm activity cycles
4. **Periodic summaries** - Regular cycle accomplishment tracking

---

## Protocol Data Sources

### Input Files

- `agent_workspaces/Agent-X/status.json` (for all agents)
  - Extracts: `completed_tasks`
  - Extracts: `achievements`
  - Extracts: `current_tasks`
  - Extracts: `current_mission`
  - Extracts: `status`, `mission_priority`, `last_updated`

### Output Files

**Report:**
- `reports/cycle_accomplishments_YYYYMMDD_HHMMSS.md`
  - Format: Markdown
  - Location: `reports/` directory
  - Naming: Timestamp-based for chronological tracking

**Blog Post (v2.0):**
- `docs/blog/cycle_accomplishments_YYYY-MM-DD.md`
  - Format: Markdown with frontmatter
  - Location: `docs/blog/` directory
  - Content: Victor-voiced narrative for autoblogger
  - Voice Profile: `config/voice_profiles/victor_voice_profile.yaml`

### Discord Posting (v2.0 Enhanced)

- **Automatic:** Report summary automatically posted to Discord
- **Channel:** Agent-4 (Captain) channel via DiscordRouterPoster (configurable)
- **Content:** 
  - Summary message with totals (agents, tasks, achievements)
  - Per-agent detailed messages (chunked for readability, max 1600 chars)
  - Full report file upload
- **Protocol:** Uses `tools/categories/communication_tools.py` DiscordRouterPoster directly
- **Error Handling:** Discord posting failures don't block report generation
- **Chunking:** Large agent details automatically split into multiple messages

---

## Protocol Output Format

### Discord Post

The protocol automatically posts a summary to Discord:
- **Channel:** Agent-4 (Captain) channel
- **Title:** "Cycle Accomplishments Report"
- **Content:** Summary with date, agent count, task totals, achievement totals, and report file reference
- **Format:** Markdown summary (truncated if needed for Discord limits)

### Report Structure

1. **Header**
   - Generated timestamp
   - Date
   - Agent count

2. **Summary Section**
   - Total agents included
   - Total completed tasks
   - Total achievements

3. **Agent Sections** (one per agent)
   - Agent ID and name
   - Status and priority
   - Last updated timestamp
   - Current mission
   - Completed tasks (limited to 20 most recent)
   - Achievements (limited to 15 most recent)
   - Active tasks (limited to 10 most recent)

4. **Report Metadata**
   - Generated by
   - Protocol version
   - Format
   - Timestamp

---

## Protocol Error Handling

### JSON Parsing Errors

- **Behavior:** Agent skipped with warning
- **Logging:** Error logged, warning displayed
- **Impact:** Report still generated with other agents
- **Example:** `ERROR - Failed to load status for Agent-1: Expecting property name...`

### Missing Status Files

- **Behavior:** Agent skipped with warning
- **Logging:** Warning logged
- **Impact:** Report still generated with available agents

### No Agents Found

- **Behavior:** Report generation fails
- **Logging:** Error logged
- **Exit Code:** 1

---

## Protocol Integration Points

### Soft Onboarding Service

- **File:** `src/services/onboarding/soft/service.py`
- **Function:** `soft_onboard_multiple_agents()`
- **Parameter:** `generate_cycle_report: bool = True`
- **Location:** Line 172-198

### Tool Location

**Primary Implementation (v2.0):**
- **Module:** `tools/cycle_accomplishments/`
- **Entrypoint:** `tools/cycle_accomplishments/main.py`
- **Convenience Wrapper:** `tools/generate_cycle_accomplishments.py`
- **Protocol Tag:** CYCLE_ACCOMPLISHMENTS_REPORT_GENERATION
- **Protocol Version:** 2.0

**Module Structure:**
- `data_collector.py` - Collects agent status from workspaces
- `report_generator.py` - Generates markdown reports
- `blog_generator.py` - Generates Victor-voiced blog posts
- `discord_poster.py` - Handles Discord posting (chunked + file upload)
- `main.py` - CLI entrypoint

**Legacy Implementations (Deprecated):**
- `tools/generate_cycle_accomplishments_report.py` (v1.0) - ⚠️ Deprecated
- `tools/unified_cycle_accomplishments_report.py` (v2.0) - ⚠️ Deprecated

---

## Protocol Usage Guidelines

### When to Run

1. **After significant swarm activity** - Capture cycle accomplishments
2. **Post-onboarding cycles** - Document agent activation accomplishments
3. **Periodic summaries** - Regular cycle tracking (daily/weekly)
4. **Pre-transition** - Before major system transitions

### Best Practices

- Run after completing major milestones
- Generate reports at consistent intervals
- Review reports for swarm coordination insights
- Archive reports for historical tracking

---

## Related Tools

### Similar Tools (Different Purposes)

1. **`CycleReportTool` (captain.cycle_report)**
   - Purpose: Captain-specific metrics (missions, messages, agents activated, points)
   - Scope: Captain only (not all agents)
   - When to use: Captain operational metrics tracking
   - See: `docs/CYCLE_REPORT_TOOLS_COMPARISON.md`

2. **`generate_daily_episode.py`**
   - Purpose: Narrative/blog post generation (not reports)
   - When to use: Blog content creation
   - See: `docs/CYCLE_REPORT_TOOLS_COMPARISON.md`

3. **`check_duplicate_accomplishments.py`**
   - Purpose: Validation (duplicate detection)
   - When to use: Data quality checks
   - See: `docs/CYCLE_REPORT_TOOLS_COMPARISON.md`

**For comprehensive all-agents cycle reports, use this protocol (`generate_cycle_accomplishments_report.py`).**

---

## Protocol Maintenance

### Version History

- **v2.0 (2025-12-30):** Modular implementation
  - Modular architecture (separate modules for data collection, report generation, blog generation, Discord posting)
  - Blog post generation (Victor-voiced narrative)
  - Enhanced Discord posting (chunked messages + file upload)
  - Cross-platform compatibility (fixed hardcoded paths)
  - Type hints throughout
  - V2 compliance (all modules under 400 lines, functions under 30 lines)
  - More detailed reports (20 tasks vs 10, 15 achievements vs 5)
  - Active tasks grouping by status
  - Block status from MASTER_TASK_LOG.md

- **v1.0 (2025-12-26):** Initial protocol definition
  - Basic report generation
  - Agent status aggregation
  - Markdown output format
  - Discord posting integration
  - Protocol documentation

### Future Enhancements

- Filter by date range
- Filter by agent
- Export to JSON format
- Integration with daily episode workflow

---

## Protocol Compliance

### Required Tags

All protocol-related code must include:
- `Protocol: CYCLE_ACCOMPLISHMENTS_REPORT_GENERATION` (in docstring)
- `Protocol Version: 2.0` (in docstring)
- `<!-- SSOT Domain: tools -->` (in docstring comment)
- Protocol ID in module docstrings

### Documentation Requirements

- Protocol documented in tool docstring
- Protocol documented in integration points
- Protocol documented in this file

---

**Protocol Status:** ✅ ACTIVE  
**Protocol Compliance:** ✅ VERIFIED  
**Last Verified:** 2025-12-30  
**Implementation:** ✅ Modular v2.0 (`tools/cycle_accomplishments/`)

