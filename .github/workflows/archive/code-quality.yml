# SSOT Domain: infrastructure
name: code-quality
on:
  push:
    branches: [main, develop]
  pull_request:
    branches: [main, develop]
  workflow_dispatch:

jobs:
  code-quality:
    runs-on: ubuntu-latest
    timeout-minutes: 20
    steps:
      - uses: actions/checkout@v4
      - uses: actions/setup-python@v5
        with:
          python-version: "3.11"
      - name: Install dependencies
        run: |
          python -m pip install --upgrade pip
          pip install ruff black isort mypy
      - name: Run code quality checks
        run: |
          ruff check . --exclude "agent_workspaces,temp_repos,archive,.git,__pycache__,*.pyc,venv,.venv" || echo "⚠️  Ruff check failed"
          black --check . --exclude "/(agent_workspaces|temp_repos|archive|.git|__pycache__|venv|.venv)/" || echo "⚠️  Black check failed"
          isort --check-only . --skip "agent_workspaces,temp_repos,archive" || echo "⚠️  isort check failed"
